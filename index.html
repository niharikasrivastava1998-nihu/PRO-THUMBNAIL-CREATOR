<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creator Studio Pro</title>
    <style>
        :root { --bg: #050505; --panel: #1a1a1a; --accent: #ff0050; --text: #ffffff; }
        body { font-family: 'Poppins', sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Layout */
        .sidebar { width: 380px; background: var(--panel); padding: 20px; display: flex; flex-direction: column; border-right: 1px solid #333; overflow-y: auto; }
        .preview-area { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; background: radial-gradient(circle, #1a1a1a 0%, #050505 100%); }
        
        /* Controls */
        h2 { font-size: 18px; color: var(--accent); text-transform: uppercase; margin-bottom: 20px; letter-spacing: 2px; }
        .group { margin-bottom: 20px; }
        label { display: block; font-size: 12px; margin-bottom: 8px; color: #888; text-transform: uppercase; }
        select, input, button { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #333; background: #000; color: white; font-size: 14px; margin-bottom: 10px; }
        
        .theme-btn { padding: 15px; font-weight: bold; cursor: pointer; border: none; transition: 0.3s; margin-top: 10px; }
        .funky-btn { background: linear-gradient(45deg, #ff0050, #00f2ea); color: black; }
        .download-btn { background: #22c55e; color: white; display: none; }
        
        video { width: 100%; border-radius: 12px; border: 2px solid #333; }
        canvas { max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 20px 50px rgba(0,0,0,0.8); display: none; }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>Thumbnail Studio</h2>
    
    <div class="group">
        <label>1. Video Source</label>
        <input type="file" id="vidIn" accept="video/*">
        <video id="player" controls></video>
    </div>

    <div class="group">
        <label>2. Platform & Size</label>
        <select id="size">
            <option value="1280/720">YouTube / FB (16:9)</option>
            <option value="1080/1920">TikTok / Reels (9:16)</option>
            <option value="1080/1350">Instagram (4:5)</option>
            <option value="1200/627">LinkedIn (1.91:1)</option>
        </select>
    </div>

    <div class="group">
        <label>3. Text Overlay</label>
        <input type="text" id="mainText" placeholder="Headline (e.g. 5X VIEWS!)">
        <input type="text" id="subText" placeholder="Sub-text (e.g. IMPOSSIBLE)">
    </div>

    <div class="group">
        <label>4. Select Style</label>
        <select id="theme">
            <option value="funky">üî• Funky (MrBeast Style)</option>
            <option value="emoji">üòÇ Emoji Challenge</option>
            <option value="paper">‚úÇÔ∏è Paper Cutout</option>
            <option value="doodle">‚úèÔ∏è Doodle Sketch</option>
        </select>
    </div>

    <button class="theme-btn funky-btn" onclick="process()">GENERATE THUMBNAIL</button>
    <button id="dlBtn" class="theme-btn download-btn" onclick="download()">DOWNLOAD PNG</button>
</div>

<div class="preview-area">
    <canvas id="canvas"></canvas>
</div>

<script>
    const video = document.getElementById('player');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    document.getElementById('vidIn').onchange = (e) => {
        video.src = URL.createObjectURL(e.target.files[0]);
    };

    function process() {
        const sizeParts = document.getElementById('size').value.split('/');
        const W = parseInt(sizeParts[0]);
        const H = parseInt(sizeParts[1]);
        const theme = document.getElementById('theme').value;
        const mainTxt = document.getElementById('mainText').value.toUpperCase();
        const subTxt = document.getElementById('subText').value.toUpperCase();

        canvas.width = W;
        canvas.height = H;
        canvas.style.display = 'block';

        // Base Image Rendering (Smart Crop)
        const vRatio = video.videoWidth / video.videoHeight;
        const cRatio = W / H;
        let dW, dH;
        if (vRatio > cRatio) { dH = H; dW = H * vRatio; }
        else { dW = W; dH = W / vRatio; }
        const x = (W - dW) / 2;
        const y = (H - dH) / 2;

        // --- THEME LOGIC ---
        ctx.clearRect(0, 0, W, H);

        if (theme === 'funky') {
            // High contrast, outer glow on human (simulated)
            ctx.filter = "contrast(1.2) saturate(1.4) brightness(1.1)";
            ctx.drawImage(video, x, y, dW, dH);
            ctx.filter = "none";
            // Purple/Blue Gradient Overlay
            const grad = ctx.createLinearGradient(0, 0, W, H);
            grad.addColorStop(0, "rgba(255, 0, 80, 0.2)");
            grad.addColorStop(1, "rgba(0, 242, 234, 0.2)");
            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, W, H);

        } else if (theme === 'emoji') {
            // B&W Background with color Emojis
            ctx.filter = "grayscale(1) contrast(1.1)";
            ctx.drawImage(video, x, y, dW, dH);
            ctx.filter = "none";
            // Draw random Emojis (simplified circles for placeholders)
            const emojis = ['üòÇ', 'üî•', 'üò±', 'üíØ'];
            for(let i=0; i<5; i++){
                ctx.font = "80px Arial";
                ctx.fillText(emojis[i%4], Math.random()*W, Math.random()*H);
            }

        } else if (theme === 'paper') {
            // Textured Cutout
            ctx.drawImage(video, x, y, dW, dH);
            ctx.strokeStyle = "white";
            ctx.lineWidth = 25;
            ctx.lineJoin = "round";
            ctx.strokeRect(20, 20, W-40, H-40);
            // Shadow for depth
            ctx.shadowColor = "black";
            ctx.shadowBlur = 30;
            ctx.strokeRect(25, 25, W-50, H-50);
            ctx.shadowBlur = 0;

        } else if (theme === 'doodle') {
            ctx.drawImage(video, x, y, dW, dH);
            ctx.strokeStyle = "#FFEB3B";
            ctx.lineWidth = 8;
            ctx.setLineDash([15, 10]);
            // Draw a rough circle around center
            ctx.beginPath();
            ctx.ellipse(W/2, H/2, W*0.3, H*0.4, 0, 0, Math.PI*2);
            ctx.stroke();
            ctx.setLineDash([]);
        }

        // --- TEXT RENDERING ---
        if (mainTxt) {
            ctx.textAlign = "center";
            ctx.shadowColor = "black";
            ctx.shadowBlur = 15;
            
            // Background plate for Funky style
            if(theme === 'funky' || theme === 'emoji') {
                ctx.fillStyle = theme === 'funky' ? "#ff0050" : "#ffffff";
                const rectW = ctx.measureText(mainTxt).width + 300;
                ctx.fillRect((W - rectW)/2, H*0.7, rectW, 120);
                ctx.fillStyle = theme === 'funky' ? "white" : "black";
            } else {
                ctx.fillStyle = "white";
            }
            
            ctx.font = `bold ${H*0.12}px Impact, sans-serif`;
            ctx.fillText(mainTxt, W/2, H*0.82);
            
            if (subTxt) {
                ctx.font = `bold ${H*0.05}px Arial`;
                ctx.fillStyle = "#FFEB3B";
                ctx.fillText(subTxt, W/2, H*0.68);
            }
        }

        document.getElementById('dlBtn').style.display = 'block';
    }

    function download() {
        const link = document.createElement('a');
        link.download = `creator-thumb-${Date.now()}.png`;
        link.href = canvas.toDataURL();
        link.click();
    }
</script>

</body>
</html>
