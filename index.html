<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creator Core: Ultimate Studio</title>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Permanent+Marker&family=Roboto+Condensed:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0c0c0e; --ui: #1a1a1c; --accent: #6366f1; --text: #f4f4f5; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        .sidebar { width: 420px; background: var(--ui); padding: 20px; overflow-y: auto; border-right: 1px solid #2d2d30; }
        .canvas-area { flex: 1; display: flex; align-items: center; justify-content: center; padding: 20px; background: #000; position: relative; }
        .tool-box { background: #27272a; padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #3f3f46; }
        h3 { font-size: 11px; text-transform: uppercase; color: var(--accent); margin: 0 0 10px 0; letter-spacing: 1px; }
        select, input, button { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #3f3f46; background: #0c0c0e; color: white; margin-bottom: 8px; font-size: 13px; box-sizing: border-box; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .emoji-bar { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; margin-bottom: 10px; }
        .btn-main { background: var(--accent); border: none; font-weight: bold; cursor: pointer; padding: 15px; font-size: 14px; color: white; }
        video { width: 100%; border-radius: 10px; margin-bottom: 10px; border: 1px solid #3f3f46; }
        canvas { max-width: 100%; max-height: 90vh; border-radius: 8px; box-shadow: 0 20px 50px rgba(0,0,0,0.8); }
    </style>
</head>
<body>

<div class="sidebar">
    <h3>1. Source & Dimensions</h3>
    <input type="file" id="vidIn" accept="video/*">
    <video id="v" controls></video>
    <select id="platform">
        <option value="1280/720">YouTube (16:9)</option>
        <option value="1080/1920">TikTok / Reels (9:16)</option>
        <option value="1200/627">LinkedIn Post (1.91:1)</option>
        <option value="1080/1080">Instagram Square (1:1)</option>
    </select>

    <div class="tool-box">
        <h3>2. Core Effects & Filters</h3>
        <select id="effectLayer">
            <option value="none">Standard Clean</option>
            <option value="paper">‚úÇÔ∏è Paper Cutout (Textured)</option>
            <option value="doodle">‚úèÔ∏è Doodle Sketch (Yellow)</option>
            <option value="funky">üî• Funky Glow (Neon)</option>
            <option value="spotlight">üë§ Human Spotlight</option>
        </select>
        <select id="filterSelect">
            <option value="none">No Filter</option>
            <option value="grayscale(1)">Noir (B&W)</option>
            <option value="contrast(1.6) saturate(1.5)">Vivid Funky</option>
            <option value="sepia(0.8)">Vintage Paper</option>
            <option value="hue-rotate(270deg)">Purple Cyber</option>
            <option value="invert(1)">X-Ray Mode</option>
            <option value="brightness(1.5) saturate(1.2)">High Glow</option>
            <option value="blur(4px)">Soft Dream</option>
            <option value="contrast(2) brightness(0.6)">Dark Cinematic</option>
            <option value="saturate(4)">Pop Art</option>
        </select>
    </div>

    <div class="tool-box">
        <h3>3. Text & Typography</h3>
        <input type="text" id="tText" placeholder="Headline Text...">
        <div class="grid-2">
            <select id="tFont">
                <option value="Impact">Impact (Standard)</option>
                <option value="'Bangers'">Bangers (Funky)</option>
                <option value="'Permanent Marker'">Marker (Doodle)</option>
                <option value="'Roboto Condensed'">Modern Bold</option>
            </select>
            <input type="color" id="tColor" value="#ffffff">
        </div>
        <div class="grid-2">
            <input type="number" id="tSize" value="100" title="Size">
            <select id="tAlign">
                <option value="center">Center</option>
                <option value="left">Left</option>
                <option value="right">Right</option>
            </select>
        </div>
    </div>

    <div class="tool-box">
        <h3>4. Emojis & Shapes</h3>
        <div class="emoji-bar">
            <button onclick="addE('üòÇ')">üòÇ</button><button onclick="addE('üî•')">üî•</button>
            <button onclick="addE('üò±')">üò±</button><button onclick="addE('üíØ')">üíØ</button>
            <button onclick="addE('üöÄ')">üöÄ</button>
        </div>
        <select id="callout">
            <option value="none">No Callout</option>
            <option value="banner">Bottom Banner</option>
            <option value="arrow">Red Arrow (Pointer)</option>
        </select>
    </div>

    <button class="btn-main" onclick="bake()">BAKE THUMBNAIL</button>
    <button class="btn-main" style="background:#10b981; margin-top:5px;" onclick="dl()">DOWNLOAD PNG</button>
</div>

<div class="canvas-area">
    <canvas id="c"></canvas>
</div>

<script>
    const vid = document.getElementById('v'), can = document.getElementById('c'), ctx = can.getContext('2d');
    let emojis = [];

    document.getElementById('vidIn').onchange = (e) => vid.src = URL.createObjectURL(e.target.files[0]);
    function addE(e) { emojis.push({char: e, x: Math.random() * 0.7 + 0.1, y: Math.random() * 0.7 + 0.1}); bake(); }

    function bake() {
        const [W, H] = document.getElementById('platform').value.split('/').map(Number);
        can.width = W; can.height = H;
        const fx = document.getElementById('effectLayer').value;
        const filt = document.getElementById('filterSelect').value;

        // Smart Crop Base
        const vR = vid.videoWidth / vid.videoHeight, tR = W / H;
        let dW = W, dH = H;
        if (vR > tR) { dW = H * vR; } else { dH = W / vR; }
        const oX = (W - dW)/2, oY = (H - dH)/2;

        ctx.clearRect(0, 0, W, H);

        // Filter Layer
        ctx.filter = filt;
        ctx.drawImage(vid, oX, oY, dW, dH);
        ctx.filter = "none";

        // Effect Layer
        if (fx === 'spotlight') {
            ctx.fillStyle = "rgba(0,0,0,0.6)";
            ctx.fillRect(0,0,W,H);
            ctx.save();
            ctx.beginPath(); ctx.arc(W/2, H/3, Math.min(W,H)*0.4, 0, Math.PI*2);
            ctx.clip();
            ctx.drawImage(vid, oX, oY, dW, dH);
            ctx.restore();
        } else if (fx === 'paper') {
            ctx.save();
            ctx.strokeStyle = "white"; ctx.lineWidth = 25; ctx.setTransform(1.01, 0.01, -0.01, 1, 0, 0);
            ctx.shadowColor = "rgba(0,0,0,0.5)"; ctx.shadowBlur = 20;
            ctx.strokeRect(30, 30, W-60, H-60);
            ctx.resetTransform(); ctx.restore();
        } else if (fx === 'doodle') {
            ctx.strokeStyle = "#FFEB3B"; ctx.lineWidth = 10; ctx.setLineDash([20, 15]);
            ctx.strokeRect(50, 50, W-100, H-100);
            ctx.setLineDash([]);
        } else if (fx === 'funky') {
            const grad = ctx.createLinearGradient(0,0,W,H);
            grad.addColorStop(0, "rgba(255,0,80,0.3)"); grad.addColorStop(1, "rgba(0,242,234,0.3)");
            ctx.fillStyle = grad; ctx.fillRect(0,0,W,H);
        }

        // Callout Shapes
        const co = document.getElementById('callout').value;
        if (co === 'banner') {
            ctx.fillStyle = "rgba(255,0,80,0.8)";
            ctx.fillRect(0, H*0.75, W, H*0.2);
        } else if (co === 'arrow') {
            ctx.fillStyle = "#ff0000";
            ctx.beginPath(); ctx.moveTo(W*0.8, H*0.4); ctx.lineTo(W*0.9, H*0.2); ctx.lineTo(W*0.95, H*0.35); ctx.fill();
        }

        // Text Layer
        const txt = document.getElementById('tText').value;
        if (txt) {
            ctx.font = `bold ${document.getElementById('tSize').value}px ${document.getElementById('tFont').value}`;
            ctx.fillStyle = document.getElementById('tColor').value;
            ctx.textAlign = document.getElementById('tAlign').value;
            ctx.shadowColor = "black"; ctx.shadowBlur = 20;
            ctx.fillText(txt.toUpperCase(), W/2, H*0.85);
        }

        // Emoji Layer
        emojis.forEach(e => {
            ctx.font = "120px Arial";
            ctx.fillText(e.char, e.x * W, e.y * H);
        });
    }

    function dl() {
        const l = document.createElement('a'); l.download = 'creator-core-thumb.png'; l.href = can.toDataURL(); l.click();
    }
</script>
</body>
</html>
